<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Download File Ajax Callback Demo</title>
</head>

<body>
    <h1>Download File Ajax Callback Demo</h1>

    <canvas id="mcanvas"></canvas>

    <button onclick="download_image()">
        Download
    </button>

    <script>
        var c = document.getElementById("mcanvas");
        var ctx = c.getContext("2d");
        ctx.beginPath();
        ctx.arc(100, 75, 50, 0, 2 * Math.PI);
        ctx.stroke();

        function download_image() {
            var canvas = document.getElementById("mcanvas");
            image = canvas.toDataURL("image/png").replace("image/png", "image/octet-stream");
            var link = document.createElement('a');
            link.download = "my-image.png";
            link.href = image;
            link.click();
        }
    </script>
</body>

</html>